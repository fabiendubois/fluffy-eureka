<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calculateur FTP cyclisme (W &amp; W/kg) ‚Äì Test 20‚Äô &amp; zones d‚Äôentra√Ænement</title>
  <meta name="description" content="Calcule ta FTP √† partir d‚Äôun test 20 minutes, d‚Äôun test ramp ou d‚Äôune estimation. Obtiens tes zones Z1‚ÄìZ7 et un plan d‚Äôentra√Ænement adapt√©.">
  <meta property="og:title" content="Calculateur FTP cyclisme gratuit (W &amp; W/kg)">
  <meta property="og:description" content="Simulateur FTP cycliste : tests 20 minutes, ramp, estimation par niveau. Zones d‚Äôentra√Ænement et plan 3 s√©ances inclus.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://example.com/ftp-cyclisme">
  <meta property="og:image" content="https://example.com/assets/ftp-cyclisme.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Calculateur FTP cyclisme (W &amp; W/kg)">
  <meta name="twitter:description" content="Calcule ta FTP, tes zones Z1-Z7 et ton plan d‚Äôentra√Ænement personnalis√©.">
  <meta name="twitter:image" content="https://example.com/assets/ftp-cyclisme.jpg">
  <style>
    :root {
      color-scheme: light;
      --bg: #F7F7F8;
      --surface: #FFFFFF;
      --text: #1F2937;
      --muted: #6B7280;
      --border: #E5E7EB;
      --accent: #FF7A1A;
      --accent-700: #E76600;
      --accent-50: #FFF3E9;
      --success: #16A34A;
      --warning: #D97706;
      --danger: #DC2626;
      --fs-xs: 12px;
      --fs-sm: 14px;
      --fs-base: 16px;
      --fs-md: 18px;
      --fs-lg: 22px;
      --fs-xl: 30px;
      --fs-2xl: 36px;
      --fw-normal: 400;
      --fw-medium: 500;
      --fw-semibold: 600;
      --fw-bold: 700;
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-pill: 999px;
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, .05);
      --shadow-md: 0 4px 16px rgba(0, 0, 0, .08);
      --shadow-lg: 0 10px 30px rgba(0, 0, 0, .12);
      --z-base: 1;
      --z-overlay: 10;
      --z-modal: 100;
    }

    html {
      box-sizing: border-box;
    }

    *, *::before, *::after {
      box-sizing: inherit;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font: var(--fw-normal) var(--fs-base)/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      margin: 0;
    }

    img, svg, video {
      max-width: 100%;
      height: auto;
    }

    a {
      color: var(--accent);
      text-decoration: none;
      transition: color .18s ease;
    }

    a:hover {
      text-decoration: underline;
    }

    :focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
      box-shadow: 0 0 0 4px var(--accent-50);
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        animation: none !important;
      }
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
      padding: var(--space-4);
    }

    @media (min-width: 600px) {
      .container {
        padding: var(--space-6);
      }
    }

    @media (min-width: 768px) {
      .container {
        padding: var(--space-8);
      }
    }

    .stack-2 > * + * {
      margin-top: var(--space-2);
    }

    .stack-4 > * + * {
      margin-top: var(--space-4);
    }

    .stack-6 > * + * {
      margin-top: var(--space-6);
    }

    .stack-8 > * + * {
      margin-top: var(--space-8);
    }

    .grid-2 {
      display: grid;
      gap: var(--space-4);
    }

    @media (min-width: 768px) {
      .grid-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: var(--space-6);
      }
    }

    .section {
      margin-block: var(--space-8);
    }

    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: var(--space-5);
      transition: transform .18s ease, box-shadow .18s ease;
    }

    @media (min-width: 600px) {
      .card {
        padding: var(--space-6);
      }
    }

    .card:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }

    .card-title {
      font-size: var(--fs-lg);
      font-weight: var(--fw-semibold);
      margin: 0 0 var(--space-3);
    }

    .card-subtle {
      color: var(--muted);
      font-size: var(--fs-sm);
    }

    h1 {
      font-size: var(--fs-2xl);
      font-weight: var(--fw-semibold);
      margin: 0 0 var(--space-4);
    }

    h2 {
      font-size: var(--fs-lg);
      font-weight: var(--fw-semibold);
      margin: 0 0 var(--space-3);
    }

    h3 {
      font-size: var(--fs-md);
      font-weight: var(--fw-medium);
      margin: 0 0 var(--space-2);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-height: 44px;
      padding: 12px 18px;
      border-radius: var(--radius-pill);
      border: 1px solid transparent;
      background: var(--accent);
      color: #fff;
      font-weight: var(--fw-semibold);
      cursor: pointer;
      transition: background .18s ease, box-shadow .18s ease, transform .18s ease;
    }

    .btn:hover {
      background: var(--accent-700);
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn:disabled {
      opacity: .6;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: color-mix(in srgb, var(--border) 60%, var(--surface));
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: color-mix(in srgb, var(--border) 75%, var(--surface));
    }

    .btn-ghost {
      background: transparent;
      color: var(--accent);
      border: 1px solid transparent;
    }

    .btn-ghost:hover {
      background: var(--accent-50);
    }

    .field {
      display: grid;
      gap: 6px;
      margin-block: var(--space-4);
    }

    .label {
      font-size: var(--fs-sm);
      color: var(--muted);
    }

    .input,
    .select {
      width: 100%;
      height: 44px;
      padding: 10px 12px;
      background: #fff;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      transition: border-color .18s ease, box-shadow .18s ease;
      font: inherit;
    }

    .input:focus,
    .select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-50);
      outline: none;
    }

    .input::placeholder {
      color: color-mix(in srgb, var(--muted) 60%, var(--surface));
    }

    .help {
      font-size: var(--fs-xs);
      color: var(--muted);
    }

    .tabs {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      background: color-mix(in srgb, var(--border) 55%, var(--surface));
      padding: 6px;
      border: 1px solid var(--border);
      border-radius: var(--radius-pill);
    }

    .tab {
      padding: 10px 14px;
      border-radius: var(--radius-pill);
      border: 1px solid transparent;
      background: transparent;
      color: var(--text);
      cursor: pointer;
      min-height: 40px;
    }

    .tab.is-active {
      background: var(--accent);
      color: #fff;
    }

    .tab:focus-visible {
      outline: 2px solid var(--accent);
    }

    .table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      overflow: hidden;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
    }

    .table thead th {
      text-align: left;
      background: color-mix(in srgb, var(--border) 55%, var(--surface));
      font-size: var(--fs-sm);
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
    }

    .table tbody td {
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
    }

    .table tbody tr:nth-child(even) {
      background: color-mix(in srgb, var(--border) 35%, var(--surface));
    }

    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      background: var(--accent-50);
      color: var(--accent);
      font-weight: var(--fw-semibold);
      font-size: var(--fs-sm);
    }

    .metric {
      display: grid;
      gap: 4px;
    }

    .metric .value {
      font-size: 28px;
      font-weight: var(--fw-bold);
    }

    .metric .label {
      color: var(--muted);
      font-size: var(--fs-sm);
    }

    .callout {
      background: var(--accent-50);
      border-left: 4px solid var(--accent);
      padding: 14px;
      border-radius: var(--radius-md);
    }

    .callout .title {
      font-weight: var(--fw-semibold);
      margin: 0 0 4px;
    }

    .callout .text {
      color: var(--muted);
      font-size: var(--fs-sm);
    }

    .link-muted {
      color: var(--muted);
    }

    .link-muted:hover {
      color: var(--text);
    }

    ul.clean {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    ul.check > li {
      margin: 6px 0;
      padding-left: 22px;
      position: relative;
    }

    ul.check > li::before {
      content: "\2713";
      position: absolute;
      left: 0;
      color: var(--accent);
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .muted {
      color: var(--muted);
    }

    .center {
      text-align: center;
    }

    .pill {
      border-radius: var(--radius-pill);
    }

    .shadow-sm {
      box-shadow: var(--shadow-sm);
    }

    .shadow-md {
      box-shadow: var(--shadow-md);
    }

    .shadow-lg {
      box-shadow: var(--shadow-lg);
    }

    .mt-2 {
      margin-top: var(--space-2);
    }

    .mt-4 {
      margin-top: var(--space-4);
    }

    .mt-6 {
      margin-top: var(--space-6);
    }

    .mt-8 {
      margin-top: var(--space-8);
    }

    .mb-2 {
      margin-bottom: var(--space-2);
    }

    .mb-4 {
      margin-bottom: var(--space-4);
    }

    .mb-6 {
      margin-bottom: var(--space-6);
    }

    .mb-8 {
      margin-bottom: var(--space-8);
    }

    .mode-options {
      display: grid;
      gap: var(--space-3);
    }

    .radio-card {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-4);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      background: var(--surface);
      cursor: pointer;
      transition: border-color .18s ease, box-shadow .18s ease, transform .18s ease;
    }

    .radio-card:hover {
      border-color: var(--accent);
      box-shadow: var(--shadow-sm);
      transform: translateY(-1px);
    }

    .radio-card input[type="radio"] {
      accent-color: var(--accent);
    }

    fieldset {
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: var(--space-4);
      margin: 0;
      background: var(--surface);
    }

    legend {
      font-size: var(--fs-sm);
      font-weight: var(--fw-semibold);
      color: var(--accent);
      padding: 0 var(--space-2);
    }

    .method-panel {
      display: none;
    }

    .method-panel.active {
      display: grid;
      gap: var(--space-4);
    }

    #results {
      display: grid;
      gap: var(--space-6);
    }

    .stats {
      display: grid;
      gap: var(--space-4);
    }

    @media (min-width: 600px) {
      .stats {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .stat-card {
      padding: var(--space-4);
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--surface);
      box-shadow: var(--shadow-sm);
      text-align: center;
    }

    .stat-card .value {
      color: var(--accent);
    }

    .zone-tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      font-size: var(--fs-sm);
      font-weight: var(--fw-semibold);
      border: 1px solid var(--accent-700);
      background: var(--accent-50);
      color: var(--accent-700);
    }

    .zone-range {
      display: block;
      font-weight: var(--fw-semibold);
    }

    .zone-duration {
      color: var(--muted);
      font-size: var(--fs-sm);
    }

    .zone-bar {
      position: relative;
      height: 10px;
      border-radius: var(--radius-pill);
      background: color-mix(in srgb, var(--border) 80%, var(--surface));
      margin-top: var(--space-2);
      overflow: hidden;
    }

    .zone-bar__fill {
      display: block;
      height: 100%;
      border-radius: inherit;
      margin-left: var(--fill-start, 0);
      width: var(--fill-width, 100%);
      background: var(--zone-color, var(--accent));
    }

    .zone-bar--z1 {
      --zone-color: color-mix(in srgb, var(--accent) 35%, var(--surface));
    }

    .zone-bar--z2 {
      --zone-color: color-mix(in srgb, var(--accent) 50%, var(--surface));
    }

    .zone-bar--z3 {
      --zone-color: color-mix(in srgb, var(--accent) 65%, var(--surface));
    }

    .zone-bar--z4 {
      --zone-color: var(--accent);
    }

    .zone-bar--z5 {
      --zone-color: var(--accent-700);
    }

    .zone-bar--z6 {
      --zone-color: color-mix(in srgb, var(--accent-700) 80%, var(--text));
    }

    .zone-bar--z7 {
      --zone-color: var(--danger);
    }

    .table-wrapper {
      width: 100%;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      border-radius: var(--radius-md);
    }

    .table-wrapper .table {
      min-width: 560px;
    }

    .plan {
      border-radius: var(--radius-lg);
      background: var(--surface);
      border: 1px solid var(--border);
      padding: var(--space-4);
      box-shadow: var(--shadow-sm);
    }

    @media (min-width: 600px) {
      .plan {
        padding: var(--space-5);
      }
    }

    #motivation {
      font-weight: var(--fw-semibold);
      color: var(--accent-700);
      text-align: center;
    }

    #history-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: var(--space-3);
    }

    #history-list li {
      padding: var(--space-3) var(--space-4);
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--accent-50);
      font-weight: var(--fw-medium);
    }

    .history-header {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-3);
    }

    .faq-item {
      border-bottom: 1px solid var(--border);
      padding-block: var(--space-4);
    }

    .faq-item:last-child {
      border-bottom: none;
    }

    footer {
      margin-top: var(--space-10);
      font-size: var(--fs-sm);
      color: var(--muted);
      text-align: center;
      padding-bottom: var(--space-8);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0F1115;
        --surface: #151822;
        --text: #F3F4F6;
        --muted: #9CA3AF;
        --border: #242736;
        --accent: #FF7A1A;
        --accent-700: #D45F00;
        --accent-50: #2A190E;
      }

      .table thead th {
        background: #1A1F2B;
      }

      .table tbody tr:nth-child(even) {
        background: #121521;
      }
    }
  </style>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Comment calculer ma FTP ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Tu peux r√©aliser un test de 20 minutes, un test ramp progressif ou utiliser une estimation selon ton niveau. Ce calculateur applique automatiquement le bon coefficient pour donner ta FTP en watts et en watts par kilo."
        }
      },
      {
        "@type": "Question",
        "name": "Quelle est la bonne FTP pour un cycliste amateur ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "La FTP d‚Äôun amateur varie souvent entre 2 et 4 W/kg. L‚Äôobjectif est d‚Äôam√©liorer progressivement ce chiffre avec des s√©ances r√©guli√®res."
        }
      },
      {
        "@type": "Question",
        "name": "Quand refaire un test FTP ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Refais un test toutes les 6 √† 8 semaines pour ajuster tes zones d‚Äôentra√Ænement et valider tes progr√®s."
        }
      }
    ]
  }
  </script>
</head>
<body>
  <main class="container stack-8">
    <header class="section center stack-4">
      <span class="badge">Calculateur FTP cyclisme</span>
      <h1>Calcule ta FTP en quelques minutes</h1>
      <p class="card-subtle">Choisis ton test pr√©f√©r√© (20 minutes, ramp ou estimation par niveau) pour conna√Ætre ta FTP en watts et en watts par kilo.</p>
      <p>Obtiens tes zones Z1-Z7, une interpr√©tation claire et un plan de 3 s√©ances adapt√© √† ton niveau.</p>
    </header>

    <section class="section card stack-6" id="calculator">
      <div class="stack-2">
        <h2 class="card-title">Entre tes donn√©es</h2>
        <p class="card-subtle">Renseigne les informations correspondant √† ta m√©thode de test pour g√©n√©rer automatiquement ta FTP.</p>
      </div>
      <form id="ftp-form" class="stack-4" autocomplete="off">
        <fieldset>
          <legend>M√©thode de calcul</legend>
          <div class="mode-options">
            <label class="radio-card">
              <input type="radio" name="mode" value="20min" checked>
              <span>Test 20 minutes</span>
            </label>
            <label class="radio-card">
              <input type="radio" name="mode" value="ramp">
              <span>Test ramp</span>
            </label>
            <label class="radio-card">
              <input type="radio" name="mode" value="niveau">
              <span>Estimation par niveau</span>
            </label>
          </div>

          <div class="method-panel active" data-panel="20min">
            <div class="grid-2">
              <label class="field">
                <span class="label">Puissance moyenne 20'</span>
                <input class="input" type="number" id="power20" min="50" max="600" placeholder="Ex. 280" required>
              </label>
              <label class="field">
                <span class="label">Poids (kg)</span>
                <input class="input" type="number" id="weight20" min="30" max="120" placeholder="Ex. 72" required>
              </label>
            </div>
          </div>

          <div class="method-panel" data-panel="ramp">
            <div class="grid-2">
              <label class="field">
                <span class="label">Puissance max atteinte (W)</span>
                <input class="input" type="number" id="powerramp" min="50" max="600" placeholder="Ex. 360">
              </label>
              <label class="field">
                <span class="label">Poids (kg)</span>
                <input class="input" type="number" id="weightramp" min="30" max="120" placeholder="Ex. 70">
              </label>
            </div>
          </div>

          <div class="method-panel" data-panel="niveau">
            <div class="grid-2">
              <label class="field">
                <span class="label">Ton niveau actuel</span>
                <select class="select" id="niveau">
                  <option value="debutant">D√©butant (FTP estim√©e 2.3 W/kg)</option>
                  <option value="intermediaire">Interm√©diaire (FTP estim√©e 3.1 W/kg)</option>
                  <option value="avance">Avanc√© (FTP estim√©e 3.8 W/kg)</option>
                </select>
              </label>
              <label class="field">
                <span class="label">Poids (kg)</span>
                <input class="input" type="number" id="weightniveau" min="30" max="120" placeholder="Ex. 68">
              </label>
            </div>
          </div>
        </fieldset>

        <button type="submit" class="btn">Calculer ma FTP</button>
      </form>
    </section>

    <section id="results" aria-live="polite" class="section card stack-6">
      <div class="stack-2">
        <h2 class="card-title">R√©sultats</h2>
        <p class="card-subtle">Ta FTP calcul√©e √† partir des donn√©es fournies.</p>
      </div>
      <div class="stats">
        <div class="stat-card metric">
          <span class="label">FTP (W)</span>
          <span class="value" id="ftp-watts">0 W</span>
        </div>
        <div class="stat-card metric">
          <span class="label">FTP normalis√©e (W/kg)</span>
          <span class="value" id="ftp-wkg">0.00 W/kg</span>
        </div>
      </div>
      <div class="stack-4">
        <h3>Zones d‚Äôentra√Ænement (table Coggan)</h3>
        <div class="table-wrapper">
          <table class="table" aria-describedby="zone-helper">
            <caption id="zone-helper" class="sr-only">Plages de puissance bas√©es sur ta FTP actuelle. La barre color√©e illustre la zone de travail, la colonne RPE d√©crit l‚Äôeffort per√ßu et la derni√®re colonne pr√©cise l‚Äôobjectif et la dur√©e conseill√©e.</caption>
            <thead>
              <tr>
                <th scope="col">Zone</th>
                <th scope="col">Plage de puissance</th>
                <th scope="col">RPE / sensations</th>
                <th scope="col">Objectif &amp; dur√©e</th>
              </tr>
            </thead>
            <tbody id="zone-table"></tbody>
          </table>
        </div>
      </div>
      <div class="plan stack-4" aria-live="polite" aria-label="Plan d'entra√Ænement personnalis√©">
        <h3>Plan d‚Äôentra√Ænement (semaine type)</h3>
        <ul id="plan-list">
          <li>Choisis une m√©thode puis calcule ta FTP pour recevoir un plan cibl√©.</li>
        </ul>
      </div>
      <p id="motivation">Tu es pr√™t √† progresser üö¥‚Äç‚ôÇÔ∏è !</p>
    </section>

    <section id="history" aria-live="polite" class="section card stack-4">
      <div class="history-header">
        <h2 class="card-title">Historique des calculs</h2>
        <button id="history-clear" type="button" class="btn btn-secondary">Effacer l‚Äôhistorique</button>
      </div>
      <p id="history-empty" class="muted">R√©alise un calcul pour remplir l‚Äôhistorique.</p>
      <ul id="history-list" aria-live="polite"></ul>
    </section>

    <section aria-labelledby="guide-tests" class="section card stack-4">
      <div class="stack-2">
        <h2 id="guide-tests" class="card-title">Comprendre tes tests FTP</h2>
        <p>Le test de 20 minutes est rapide et fiable. Tu p√©dales √† fond pendant vingt minutes puis le calculateur retire 5&nbsp;% pour estimer ton effort sur une heure. Le test ramp augmente la puissance chaque minute jusqu‚Äô√† l‚Äô√©chec : nous retenons 75&nbsp;% de la derni√®re minute compl√®te.</p>
        <p>Pas encore √©quip√© ? Choisis l‚Äôestimation par niveau. C‚Äôest pratique pour planifier tes s√©ances ou pour suivre une progression simple sans stress.</p>
      </div>
    </section>

    <section aria-labelledby="conseils" class="section card stack-4">
      <div class="stack-2">
        <h2 id="conseils" class="card-title">Conseils pour progresser en s√©curit√©</h2>
        <ul class="clean">
          <li>√âchauffe-toi au moins 15 minutes avant chaque test pour prot√©ger tes muscles.</li>
          <li>Hydrate-toi r√©guli√®rement, m√™me en int√©rieur sur home-trainer.</li>
          <li>Dors suffisamment : la r√©cup√©ration est la cl√© pour augmenter ta FTP.</li>
          <li>Ajoute une sortie facile en Z1-Z2 pour consolider ton endurance de base.</li>
        </ul>
      </div>
    </section>

    <!-- AFFILIATE_BLOCK -->
    <section id="affiliation" aria-labelledby="affiliation-title" class="section card stack-4">
      <div class="stack-2">
        <h2 id="affiliation-title" class="card-title">Capteurs &amp; home-trainers recommand√©s</h2>
        <ul class="clean">
          <li>Capteur de puissance ‚Äì <a href="#">Voir le prix</a></li>
          <li>Home-trainer connect√© ‚Äì <a href="#">Voir le prix</a></li>
          <li>Montre GPS v√©lo ‚Äì <a href="#">Voir le prix</a></li>
        </ul>
        <p><em>Liens affili√©s : je peux percevoir une petite commission, sans surco√ªt pour toi.</em></p>
      </div>
    </section>
    <!-- END AFFILIATE_BLOCK -->

    <section aria-labelledby="faq-title" class="section card stack-4">
      <div class="stack-4">
        <h2 id="faq-title" class="card-title">FAQ FTP cyclisme</h2>
        <div class="faq-item">
          <h3>Comment calculer ma FTP ?</h3>
          <p>R√©alise un test 20 minutes √† fond, un test ramp ou utilise l‚Äôestimation par niveau. Ensuite, clique sur ¬´ Calculer ma FTP ¬ª pour obtenir ton r√©sultat.</p>
        </div>
        <div class="faq-item">
          <h3>Quelle est la bonne FTP pour un cycliste amateur ?</h3>
          <p>Un cycliste amateur se situe souvent entre 2 et 4&nbsp;W/kg. Avec un suivi r√©gulier, tu peux viser une progression de 5&nbsp;% tous les deux mois.</p>
        </div>
        <div class="faq-item">
          <h3>Quelle diff√©rence entre FTP et W/kg ?</h3>
          <p>La FTP exprime ta puissance pure en watts. Les watts par kilo comparent ta puissance √† ton poids et donnent une vision plus juste de tes performances en c√¥te.</p>
        </div>
        <div class="faq-item">
          <h3>Quand refaire un test FTP ?</h3>
          <p>Teste-toi toutes les 6 √† 8 semaines, ou apr√®s un bloc d‚Äôentra√Ænement structur√©, pour valider les progr√®s et adapter les intensit√©s.</p>
        </div>
      </div>
    </section>

    <footer>
      <p>Mentions l√©gales ‚Äì Texte indicatif</p>
      <p><a href="#">Politique de confidentialit√©</a></p>
      <p>Disclaimer : Cet outil est informatif. Consulte ton entra√Æneur avant tout changement de programme.</p>
    </footer>
  </main>

  <script>
    const modeRadios = document.querySelectorAll('input[name="mode"]');
    const panels = document.querySelectorAll('.method-panel');
    const ftpForm = document.getElementById('ftp-form');
    const ftpWatts = document.getElementById('ftp-watts');
    const ftpWkg = document.getElementById('ftp-wkg');
    const zoneTable = document.getElementById('zone-table');
    const planList = document.getElementById('plan-list');
    const motivation = document.getElementById('motivation');
    const historyList = document.getElementById('history-list');
    const historyEmpty = document.getElementById('history-empty');
    const historyClearBtn = document.getElementById('history-clear');

    const workouts = {
      debutant: [
        'S√©ance 1 : 45 min en Z2 + 3 acc√©l√©rations de 1 min en Z4.',
        'S√©ance 2 : 30 min √©chauffement, 3 √ó 5 min en Z3 avec 3 min Z1 entre, retour au calme.',
        'S√©ance 3 : Sortie longue 90 min en Z2 avec 10 min finales en Z3.'
      ],
      intermediaire: [
        'S√©ance 1 : 20 min Z2 puis 4 √ó 4 min en Z4, r√©cup√©ration 3 min Z1.',
        'S√©ance 2 : 75 min endurance, int√©grer 2 blocs de 12 min en Z3.',
        'S√©ance 3 : 6 √ó 3 min en Z5 avec 3 min faciles, finir par 15 min Z2.'
      ],
      avance: [
        'S√©ance 1 : 3 √ó 10 min en Z4-Z5, r√©cup√©ration 5 min Z2 entre les blocs.',
        'S√©ance 2 : 2 h endurance avec 5 sprints de 15 s en Z6, r√©cup√©ration compl√®te.',
        'S√©ance 3 : 5 √ó 6 min en Z5, r√©cup√©ration 4 min, finir par 20 min Z3.'
      ]
    };

    const zoneDefs = [
      {
        label: 'Z1',
        name: 'Endurance active',
        min: 0,
        max: 0.55,
        description: 'R√©cup√©ration facile',
        rpe: 'RPE 1-2/10 ‚Äì Tr√®s facile, conversation ais√©e',
        dureeConseillee: '45 √† 120 min et plus'
      },
      {
        label: 'Z2',
        name: 'Endurance',
        min: 0.56,
        max: 0.75,
        description: 'Sorties longues',
        rpe: 'RPE 2-3/10 ‚Äì Stable, respiration contr√¥l√©e',
        dureeConseillee: '60 √† 180 min'
      },
      {
        label: 'Z3',
        name: 'Tempo',
        min: 0.76,
        max: 0.90,
        description: 'Souffle r√©gulier',
        rpe: 'RPE 3-4/10 ‚Äì Soutenu mais confortable',
        dureeConseillee: '20 √† 60 min'
      },
      {
        label: 'Z4',
        name: 'Seuil',
        min: 0.91,
        max: 1.05,
        description: 'Allure chrono',
        rpe: 'RPE 5-6/10 ‚Äì Dur mais contr√¥l√©',
        dureeConseillee: '10 √† 30 min par blocs'
      },
      {
        label: 'Z5',
        name: 'VO2max',
        min: 1.06,
        max: 1.20,
        description: 'Efforts intenses',
        rpe: 'RPE 7-8/10 ‚Äì Respiration haletante',
        dureeConseillee: '3 √† 8 min par r√©p√©tition'
      },
      {
        label: 'Z6',
        name: 'Ana√©robie',
        min: 1.21,
        max: 1.50,
        description: 'Sprints courts',
        rpe: 'RPE 9/10 ‚Äì Explosion maximale',
        dureeConseillee: '30 s √† 3 min par r√©p√©tition'
      },
      {
        label: 'Z7',
        name: 'Neuromusculaire',
        min: 1.51,
        max: Infinity,
        description: 'D√©marrages explosifs',
        rpe: 'RPE 10/10 ‚Äì Effort total',
        dureeConseillee: 'Jusqu‚Äô√† 30 s'
      }
    ];

    modeRadios.forEach(radio => {
      radio.addEventListener('change', () => {
        panels.forEach(panel => {
          const isActive = panel.dataset.panel === radio.value;
          panel.classList.toggle('active', isActive);
          const inputs = panel.querySelectorAll('input');
          inputs.forEach(input => input.required = isActive);
          const selects = panel.querySelectorAll('select');
          selects.forEach(select => select.required = isActive);
        });
      });
    });

    function formatRange(min, max) {
      if (max === Infinity) {
        return `>${Math.round(min)} W`;
      }
      return `${Math.round(min)} ‚Äì ${Math.round(max)} W`;
    }

    function determineLevel(mode, ftp, weight) {
      if (mode === 'niveau') {
        const levelSelect = document.getElementById('niveau');
        return levelSelect.value;
      }
      const ratio = ftp && weight ? ftp / weight : 0;
      if (ratio < 2.6) return 'debutant';
      if (ratio < 3.5) return 'intermediaire';
      return 'avance';
    }

    function renderPlan(levelKey) {
      const items = workouts[levelKey] || workouts.debutant;
      planList.innerHTML = '';
      items.forEach(text => {
        const li = document.createElement('li');
        li.textContent = text;
        planList.appendChild(li);
      });
    }

    function updateZones(ftp) {
      zoneTable.innerHTML = '';
      zoneDefs.forEach((zone, index) => {
        const minW = ftp * zone.min;
        const maxW = zone.max === Infinity ? Infinity : ftp * zone.max;
        const tr = document.createElement('tr');
        const fillWidth = zone.max === Infinity ? 1 : Math.max(0, zone.max - zone.min);
        const fillStart = Math.max(0, zone.min);
        const widthPercent = zone.max === Infinity ? 100 : Math.min(100, (fillWidth / Math.max(1, zone.max)) * 100);
        const startPercent = Math.min(100, (fillStart / Math.max(1, zone.max)) * 100);
        tr.innerHTML = `
          <td>
            <span class="zone-tag">${zone.label} ¬∑ ${zone.name}</span>
          </td>
          <td>
            <span class="zone-range">${ftp ? formatRange(minW, maxW) : '‚Äî'}</span>
            <span class="zone-duration">${zone.dureeConseillee}</span>
            <span class="zone-bar zone-bar--z${index + 1}" style="--fill-width:${widthPercent}%; --fill-start:${startPercent}%">
              <span class="zone-bar__fill"></span>
            </span>
          </td>
          <td>${zone.rpe}</td>
          <td>${zone.description}</td>`;
        zoneTable.appendChild(tr);
      });
    }

    updateZones(0);
    function readHistory() {
      try {
        const stored = localStorage.getItem('ftp-history');
        if (!stored) return [];
        const parsed = JSON.parse(stored);
        return Array.isArray(parsed) ? parsed : [];
      } catch (error) {
        console.error('Impossible de lire l\'historique FTP :', error);
        return [];
      }
    }

    function formatHistoryDate(value) {
      const date = new Date(value);
      if (Number.isNaN(date.getTime())) {
        return value;
      }
      return date.toLocaleString('fr-FR', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    function renderHistory() {
      const history = readHistory();
      historyList.innerHTML = '';

      if (!history.length) {
        historyEmpty.hidden = false;
        historyList.hidden = true;
        historyClearBtn.disabled = true;
        return;
      }

      historyEmpty.hidden = true;
      historyList.hidden = false;
      historyClearBtn.disabled = false;

      history.forEach(entry => {
        const li = document.createElement('li');
        const modeLabel = {
          '20min': 'Test 20 minutes',
          ramp: 'Test ramp',
          niveau: 'Estimation par niveau'
        }[entry.mode] || entry.mode;
        li.textContent = `${formatHistoryDate(entry.date)} ‚Äì ${modeLabel} : ${entry.ftp} W (${entry.wkg} W/kg)`;
        historyList.appendChild(li);
      });
    }

    ftpForm.addEventListener('submit', event => {
      event.preventDefault();
      const mode = [...modeRadios].find(r => r.checked)?.value;
      let ftp = 0;
      let weight = 0;

      if (mode === '20min') {
        const power20 = parseFloat(document.getElementById('power20').value);
        weight = parseFloat(document.getElementById('weight20').value);
        if (!power20 || !weight) {
          alert('Merci de renseigner une puissance et un poids valides.');
          return;
        }
        ftp = power20 * 0.95;
      } else if (mode === 'ramp') {
        const powerRamp = parseFloat(document.getElementById('powerramp').value);
        weight = parseFloat(document.getElementById('weightramp').value);
        if (!powerRamp || !weight) {
          alert('Merci de renseigner une puissance et un poids valides.');
          return;
        }
        ftp = powerRamp * 0.75;
      } else if (mode === 'niveau') {
        const level = document.getElementById('niveau').value;
        weight = parseFloat(document.getElementById('weightniveau').value);
        if (!weight) {
          alert('Merci de renseigner ton poids pour l‚Äôestimation.');
          return;
        }
        if (level === 'debutant') ftp = weight * 2.3;
        if (level === 'intermediaire') ftp = weight * 3.1;
        if (level === 'avance') ftp = weight * 3.8;
      }

      const wkg = weight ? ftp / weight : 0;
      ftpWatts.textContent = `${Math.round(ftp)} W`;
      ftpWkg.textContent = `${wkg.toFixed(2)} W/kg`;

      updateZones(ftp);
      const levelKey = determineLevel(mode, ftp, weight);
      renderPlan(levelKey);

      motivation.textContent = 'Tu es pr√™t √† progresser üö¥‚Äç‚ôÇÔ∏è ! Continue sur cette lanc√©e !';

      const history = readHistory();
      const entry = {
        date: new Date().toISOString(),
        mode,
        ftp: Math.round(ftp),
        wkg: parseFloat(wkg.toFixed(2))
      };
      history.unshift(entry);
      localStorage.setItem('ftp-history', JSON.stringify(history));
      renderHistory();
    });

    historyClearBtn.addEventListener('click', () => {
      localStorage.removeItem('ftp-history');
      renderHistory();
    });

    renderHistory();
  </script>
</body>
</html>
